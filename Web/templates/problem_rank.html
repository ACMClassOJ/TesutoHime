{% extends 'base.html' %} {% set page='Rank' %} {% block head %}
<link rel="stylesheet" href="{{ url_for('.static', filename = 'lib/font-awesome/css/all.min.css') }}"> {% endblock %} {% block content %}
<div class="card card-body">
    <h1 class="text-center">{{ Problem_ID }}. {{ Title }}</h1>
    <div class="nav-wrapper">
        <ul class="nav nav-pills nav-fill flex-column flex-md-row">
            <li class="nav-item">
                <a class="nav-link mb-sm-2 mb-md-0" href="/OnlineJudge/problem?problem_id={{ Problem_ID }}">题面</a>
            </li>
            <li class="nav-item">
                <a class="nav-link mb-sm-2 mb-md-0" href="/OnlineJudge/submit?problem_id={{ Problem_ID }}">提交</a>
            </li>
            <li class="nav-item">
                <a class="nav-link mb-sm-2 mb-md-0" href="/OnlineJudge/status?problem_id={{ Problem_ID }}">评测状态</a>
            </li>
            {% if not In_Exam -%}
            <li class="nav-item">
                <a class="nav-link mb-sm-2 mb-md-0" href="/OnlineJudge/discuss?problem_id={{ Problem_ID }}">讨论</a>
            </li>
            <li class="nav-item">
                <a class="nav-link mb-sm-2 mb-md-0 active" href="/OnlineJudge/rank?problem_id={{ Problem_ID }}">排行榜</a>
            </li>
            {% endif %}
            {% if is_Admin %}
            <li class="nav-item">
                <form id="formDataZipDownload" action="/OnlineJudge/admin/data_download" method="post">
                    <input type="hidden" name="id" id="datazip_download_problem_ID" value="{{ Problem_ID }}">    
                </form>
                <a class="nav-link mb-sm-2 mb-md-0" href="javascript:document.getElementById('formDataZipDownload').submit();"> 下载本题数据 </a>
            </li>
            <li class="nav-item">
                <a class="nav-link mb-sm-2 mb-md-0" href="/OnlineJudge/admin/?problem_id={{ ID }}"> 管理 </a>
            </li>
            {% endif %}
        </ul>
    </div>
</div>
<div class="card card-body">
    <div class="table-responsive">
        <table class="table table-striped table-bordered table-hover" id="status_list">
            <thead>
                <tr>
                    <th><span>#</span></th>
                    <th><span>用户</span></th>
                    <th>
                        <a class="nav-link p-0" href="/OnlineJudge/rank?problem_id={{ Problem_ID }}&sort=time">
                            <span>运行时间</span>
                            <span class="fa-stack" style="height: 1em;line-height: 1em;font-size: 1rem">
                            <i class="fa fa-sort-up fa-stack-1x" style="color: #ced4da"></i>
                            <i class="fa fa-sort-down fa-stack-1x" {{ 'style="color: #ced4da"'|safe if Sorting != 'time' }}></i>
                        </span>
                        </a>
                    </th>
                    <th>
                        <a class="nav-link p-0" href="/OnlineJudge/rank?problem_id={{ Problem_ID }}&sort=memory">
                            <span>内存</span>
                            <span class="fa-stack" style="height: 1em;line-height: 1em;font-size: 1rem">
                            <i class="fa fa-sort-up fa-stack-1x" style="color: #ced4da"></i>
                            <i class="fa fa-sort-down fa-stack-1x" {{ 'style="color: #ced4da"'|safe if Sorting != 'memory' }}></i>
                        </span>
                        </a>
                    </th>
                    <th><span>语言</span></th>
                    <th>
                        <a class="nav-link p-0" href="/OnlineJudge/rank?problem_id={{ Problem_ID }}&sort=submit_time">
                            <span>提交时间</span>
                            <span class="fa-stack" style="height: 1em;line-height: 1em;font-size: 1rem">
                            <i class="fa fa-sort-up fa-stack-1x" style="color: #ced4da"></i>
                            <i class="fa fa-sort-down fa-stack-1x" {{ 'style="color: #ced4da"'|safe if Sorting != 'submit_time' }}></i>
                        </span>
                        </a>
                    </th>
                </tr>
            </thead>
            {% for cur in Data -%}
            <tr>
                <td><a href="/OnlineJudge/code?submit_id={{ cur[0] }}">{{ loop.index }}</a></td>
                <td>
                {% if is_Admin -%}
                    <span data-container="body" data-toggle="popover" data-placement="left" data-content="用户名：{{ cur[1] }}">{{ cur[6] }}</span>
                {% else -%}
                    {{ cur[6] }}
                {%- endif %}
                </td>
                <td>{{ cur[2] }}ms</td>
                <td>{{ cur[3] }}KiB</td>
                <td>{{ readable_lang(cur[4]) }}</td>
                <td>{{ readable_time(cur[5]) }}</td>
            </tr>
            {%- endfor %}
        </table>
    </div>
</div>
{% endblock %}

{% block script %}
<script>
    $(function(){
        $("[data-toggle='popover']").popover();
    });
    $("[data-toggle='popover']").click(function(){
        setTimeout(function(){
            $("[data-toggle='popover']").popover('hide')
        }, 2000);
    });
</script>
{% endblock %}